const projects = [
  {
    title: "Planet project",
    languages: "HTML , CSS",
    description:
      "The Saturn Information Website is a project I developed for my portfolio, showcasing my proficiency in HTML and CSS. This website serves as a comprehensive resource dedicated to providing insightful information about Saturn, the sixth planet from the Sun in our solar system.",
    imageSrc: "Images/Planet.png",
    iframeSrc:
      "https://kristian-kodehode.github.io/005-Gruppeprosjekt-Saturn-Mokhammad-Kristian/",
    gitLink: "https://github.com/mokhammad-kodehode/Age-calculator.git",
    pageSrc: "",
  },

  {
    title: "Password generator",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Password Generator is a project I developed to showcase my programming skills and provide a practical utility for generating strong and secure passwords. This project demonstrates my proficiency in web development, specifically using HTML, CSS, and JavaScript.",
    imageSrc: "Images/pass.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/password-generator/",
    gitLink: "https://github.com/mokhammad-kodehode/Age-calculator.git",
    pageSrc: "https://mokhammad-kodehode.github.io/password-generator/",
  },

  {
    title: "Unit Converter",
    languages: ["HTML   CSS   JavaScript"],
    description:
      "The 'Unit Converter' project is a web application that allows users to convert between different units of measurement. It provides a simple and intuitive interface for converting values from one unit to another, making it convenient for various conversion needs.",
    imageSrc: "Images/Unit.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Unit-converter/",
    pageSrc: "https://mokhammad-kodehode.github.io/Unit-converter/",
  },
  {
    title: "Age calculator",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Age Calculator is a powerful and user-friendly tool designed to effortlessly calculate your age based on your birthdate. Whether you're curious about your current age or need to determine the age of someone else, this handy calculator provides accurate results within seconds.",
    imageSrc: "Images/Age.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Age-calculator/",
    gitLink: "",
    pageSrc: "https://mokhammad-kodehode.github.io/Age-calculator/",
  },
  {
    title: "Calculator",
    languages: "React",
    description:
      "The Calculator App is a web application that provides a simpleand user-friendly interface for performing basic arithmeticoperations. The app allows users to perform addition, subtraction, multiplication, division,and percentage calculations with ease.The project was built using React,a popular JavaScript library for building user interfaces.",
    imageSrc: "Images/Calculator.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/calculator/",
    gitLink: "https://github.com/mokhammad-kodehode/calculator.git",
    pageSrc: "https://mokhammad-kodehode.github.io/calculator/",
  },
  {
    title: "The Weather App",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Weather App is a web application that allows users to fetch current weather data for a specific city. The app utilizes an open API to retrieve weather information. Users can enter the name of a city in the search field, and the app will display details such as the current temperature, weather conditions, wind speed, humidity,and other relevant data.",
    imageSrc: "Images/Weather.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Weather-forcast/",
    gitLink: "https://mokhammad-kodehode.github.io/calculator/",
    pageSrc: "https://mokhammad-kodehode.github.io/Weather-forcast/",
  },
];

const projectsTwo = [
  {
    title: "Planet project",
    languages: "HTML , CSS",
    description:
      "The Saturn Information Website is a project I developed for my portfolio, showcasing my proficiency in HTML and CSS. This website serves as a comprehensive resource dedicated to providing insightful information about Saturn, the sixth planet from the Sun in our solar system.",
    imageSrc: "Images/Planet.png",
    iframeSrc:
      "https://kristian-kodehode.github.io/005-Gruppeprosjekt-Saturn-Mokhammad-Kristian/",
    gitLink: "https://github.com/mokhammad-kodehode/Age-calculator.git",
    pageSrc: "",
  },

  {
    title: "Password generator",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Password Generator is a project I developed to showcase my programming skills and provide a practical utility for generating strong and secure passwords. This project demonstrates my proficiency in web development, specifically using HTML, CSS, and JavaScript.",
    imageSrc: "Images/pass.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/password-generator/",
    gitLink: "https://github.com/mokhammad-kodehode/Age-calculator.git",
    pageSrc: "https://mokhammad-kodehode.github.io/password-generator/",
  },

  {
    title: "Unit Converter",
    languages: "HTML , CSS, JavaScript",
    description:
      "The 'Unit Converter' project is a web application that allows users to convert between different units of measurement. It provides a simple and intuitive interface for converting values from one unit to another, making it convenient for various conversion needs.",
    imageSrc: "Images/Unit.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Unit-converter/",
    pageSrc: "https://mokhammad-kodehode.github.io/Unit-converter/",
  },
  {
    title: "Age calculator",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Age Calculator is a powerful and user-friendly tool designed to effortlessly calculate your age based on your birthdate. Whether you're curious about your current age or need to determine the age of someone else, this handy calculator provides accurate results within seconds.",
    imageSrc: "Images/Age.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Age-calculator/",
    gitLink: "",
    pageSrc: "https://mokhammad-kodehode.github.io/Age-calculator/",
  },
  {
    title: "Calculator",
    languages: "React",
    description:
      "The Calculator App is a web application that provides a simpleand user-friendly interface for performing basic arithmeticoperations. The app allows users to perform addition, subtraction, multiplication, division,and percentage calculations with ease.The project was built using React,a popular JavaScript library for building user interfaces.",
    imageSrc: "Images/Age.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/calculator/",
    gitLink: "https://github.com/mokhammad-kodehode/calculator.git",
    pageSrc: "https://mokhammad-kodehode.github.io/calculator/",
  },
  {
    title: "The Weather App",
    languages: "HTML , CSS, JavaScript",
    description:
      "The Weather App is a web application that allows users to fetch current weather data for a specific city. The app utilizes an open API to retrieve weather information. Users can enter the name of a city in the search field, and the app will display details such as the current temperature, weather conditions, wind speed, humidity,and other relevant data.",
    imageSrc: "Images/Weather.jpg",
    iframeSrc: "https://mokhammad-kodehode.github.io/Weather-forcast/",
    gitLink: "https://mokhammad-kodehode.github.io/calculator/",
    pageSrc: "https://mokhammad-kodehode.github.io/Weather-forcast/",
  },
];

const body = document.body;
const themeSwitcher = document.getElementById("theme-switch-checkbox");
const projectsOne = document.querySelector(".projects");
const projectsTwoContainer = document.querySelector(".projects-two");
const projectsBtnOne = document.getElementById("show_one");
const projectsBtnTwo = document.getElementById("show_two");
const projectsBtnOneResp = document.getElementById("show_one_resp");
const projectsBtnTwoResp = document.getElementById("show_two_resp");
const right = document.querySelector(".right_arrow");
const left = document.querySelector(".left_arrow");

right.addEventListener("click", () => {
  projectsOne.style.display = "none";
  projectsTwoContainer.style.display = "grid";
  left.style.display = "block";
  right.style.display = "none";
  projectsBtnTwo.classList.add("active");
  projectsBtnOne.classList.remove("active");
});

left.addEventListener("click", () => {
  projectsOne.style.display = "grid";
  projectsTwoContainer.style.display = "none";
  left.style.display = "none";
  right.style.display = "block";
  projectsBtnOne.classList.add("active");
  projectsBtnTwo.classList.remove("active");
});

projectsBtnOneResp.classList.add("active");
projectsBtnOne.classList.add("active");

projectsBtnOne.addEventListener("click", () => {
  left.style.display = "none";
  right.style.display = "block";
  projectsOne.style.display = "grid";
  projectsTwoContainer.style.display = "none";
  projectsBtnOne.classList.add("active");
  projectsBtnTwo.classList.remove("active");
});

projectsBtnTwo.addEventListener("click", () => {
  left.style.display = "block";
  right.style.display = "none";
  projectsTwoContainer.style.display = "grid";
  projectsOne.style.display = "none";
  projectsBtnTwo.classList.add("active");
  projectsBtnOne.classList.remove("active");
});

projectsBtnOneResp.addEventListener("click", () => {
  projectsOne.style.display = "flex";
  projectsTwoContainer.style.display = "none";
  projectsBtnOne.classList.add("active");
  projectsBtnTwo.classList.remove("active");
});

projectsBtnTwoResp.addEventListener("click", () => {
  projectsTwoContainer.style.display = "flex";
  projectsOne.style.display = "none";
  projectsBtnTwo.classList.add("active");
  projectsBtnOne.classList.remove("active");
});

let button; // Объявляем переменную button
let btnClose;
let isIframeExpanded = false;

// fuction for create project ca

const createProjectCard = (project) => {
  const projectCard = document.createElement("div");
  projectCard.className = "project-card";
  projectCard.setAttribute(
    "data-tooltip",
    "Click on a project for more information"
  );

  const projectImage = document.createElement("img");
  projectImage.className = "project-img";
  projectImage.src = project.imageSrc;
  projectImage.alt = project.title;
  projectCard.appendChild(projectImage);

  const projectDesc = document.createElement("div");
  projectDesc.className = "project-desc";

  projectCard.appendChild(projectDesc);

  const projectTitle = document.createElement("h2");
  projectTitle.className = "project-title";
  projectTitle.textContent = project.title;
  projectDesc.appendChild(projectTitle);

  const parag = document.createElement("p");
  parag.textContent = project.description;
  projectDesc.appendChild(parag);

  const footer = document.createElement("div");
  footer.className = "footer";
  projectDesc.appendChild(footer);

  const languagesContainer = document.createElement("ul");
  footer.appendChild(languagesContainer);

  const gitLink = document.createElement("a");
  gitLink.className = "footer_link";
  gitLink.href = project.gitLink;
  gitLink.target = "_blank";
  footer.appendChild(gitLink);

  const gitImage = document.createElement("img");
  gitImage.src = "Images/icons/Gitlink.svg";
  gitImage.alt = "GitHub Link";
  gitLink.title = "Link to GitHub page";
  gitLink.appendChild(gitImage);

  const languagess = document.createElement("li");
  languagess.textContent = project.languages;
  languagesContainer.appendChild(languagess);

  const iframeContainer = document.createElement("div");
  iframeContainer.className = "iframe-container";
  projectCard.appendChild(iframeContainer);

  const iframeWrap = document.createElement("div");
  iframeWrap.className = "iframe-wrapper";
  iframeContainer.appendChild(iframeWrap);

  const iframe = document.createElement("iframe");
  iframe.src = project.iframeSrc;
  iframeWrap.appendChild(iframe);

  projectCard.addEventListener("click", () => {
    projectDesc.classList.toggle("expanded");
    projectCard.classList.toggle("expanded");
    parag.classList.toggle("expanded");

    const isExpanded = projectCard.classList.contains("expanded");
    const isFromSecondArray =
      projectCard.parentElement === projectsTwoContainer;

    left.style.display = isFromSecondArray
      ? isExpanded
        ? "none"
        : "block"
      : "none";
    right.style.display = isFromSecondArray
      ? "none"
      : isExpanded
      ? "none"
      : "block";
    projectsBtnOne.style.display = isExpanded ? "none" : "block";
    projectsBtnTwo.style.display = isExpanded ? "none" : "block";

    projectsOne.style.overflow =
      projectsOne.style.overflow === "hidden" ? "auto" : "hidden";

    if (!button) {
      button = document.createElement("button");
      button.textContent = "Preview";
      button.classList.add("btn-primary");
      footer.appendChild(button);

      button.addEventListener("click", (event) => {
        event.stopPropagation();

        if (isIframeExpanded) {
          iframe.classList.remove("expanded-iframe");
          iframeContainer.classList.remove("expanded");
          btnClose.remove();
          isIframeExpanded = false;
        } else {
          iframe.classList.add("expanded-iframe");
          btnClose = document.createElement("button");
          btnClose.textContent = "X";
          btnClose.classList.add("btn-close");
          iframeContainer.appendChild(btnClose);
          isIframeExpanded = true;

          btnClose.addEventListener("click", (event) => {
            event.stopPropagation();
            iframe.classList.remove("expanded-iframe");
            iframeContainer.classList.remove("expanded");
            btnClose.remove();
            isIframeExpanded = false;
          });
        }

        iframeContainer.classList.toggle("expanded");
      });
    } else {
      button.remove();
      button = null;
      btnClose = null;
      isIframeExpanded = false;
    }
  });

  return projectCard;
};

// Function for adding project card to container
const addProjectsToContainer = (projects, container) => {
  projects.forEach((project) => {
    const projectElement = createProjectCard(project);
    container.appendChild(projectElement);
  });
};

addProjectsToContainer(projects, projectsOne);
addProjectsToContainer(projectsTwo, projectsTwoContainer);

themeSwitcher.addEventListener("change", () => {
  body.classList.toggle("light-theme", themeSwitcher.checked);

  const isLightTheme = themeSwitcher.checked;
  localStorage.setItem("theme", isLightTheme ? "light" : "default");
});

const savedTheme = localStorage.getItem("theme");
if (savedTheme === "light") {
  body.classList.add("light-theme");
  themeSwitcher.checked = true;
}

function toggleNav() {
  const navLinks = document.getElementById("navLinks");
  const bars = document.querySelectorAll(".bar");
  const orangeColorRGB = "rgb(254, 195, 66)";

  Array.from(bars).forEach((bar) => {
    const computedStyle = window.getComputedStyle(bar);
    const backgroundColor = computedStyle.backgroundColor;

    bar.style.backgroundColor =
      backgroundColor === orangeColorRGB ? "white" : "#FEC342";
  });

  navLinks.style.display = navLinks.style.display === "flex" ? "none" : "flex";
}

paper.install(window);

// Get a reference to the canvas object
const canvas = document.getElementById("myCanvas");

// Create an empty project and a view for the canvas:
paper.setup(canvas);

window.onload = function () {
  const h = window.innerHeight;
  const w = window.innerWidth;
  const halfH = h * 0.3;
  const speed = 0.09;
  const strokeWidth = 55;
  const frequency = 4;
  const pathCount = 8;

  const pathPoints = 10;
  const pathColors = [
    "rgba(85, 80, 129, 1)",
    "rgba(255, 255, 255, 0.5)",
    "rgba(85, 80, 129, 0.5)",
    "rgba(255, 255, 255, 1)",
    "rgba(85, 80, 129, 0.5)",
    "rgba(183, 36, 92, 0.5)",
    "rgba(255, 255, 255, 0.5)",
    "rgba(85, 80, 129, 0.5)",
    "rgba(255, 255, 255, 0.5)",
    "rgba(85, 80, 129, 0.5)",
  ];

  const path = [];

  const offsetRandom = 2;
  const randomOffsets = [];
  const maxDistRandom = 3;
  const randomDistances = [];
  const randomHeights = [];

  const magnitued = 0.1;

  for (let i = 0; i < pathCount; i++) {
    randomOffsets[i] = Math.random() * offsetRandom;
    randomDistances[i] = Math.random() * maxDistRandom;

    randomHeights[i] = Math.max(Math.random() + 0.9, 0.5);
    // Create a Paper.js Path to draw a line into it:
    path[i] = new paper.Path();
    path[i].lineCap = "round";
    // Give the stroke a color

    path[i].strokeColor = pathColors[i];
    // path[i].strokeColor = new paper.Color(
    //   Math.floor(Math.random() * 255),
    //   Math.floor(Math.random() * 255),
    //   Math.floor(Math.random() * 255)
    // );
    path[i].strokeWidth = strokeWidth * randomDistances[i];

    for (let v = 0; v < pathPoints; v++) {
      path[i].add(new paper.Point(w * (v / (pathPoints - 1)), halfH));
    }
    //	path.smooth();
  }

  // Draw the view now:
  //paper.view.draw();
  view.onFrame = function (event) {
    for (let p = 0; p < path.length; p++) {
      // Loop through the segments of the path:
      for (let i = 0; i < pathPoints; i++) {
        const segment = path[p].segments[i];

        // A cylic value between -1 and 1
        const sinus = Math.sin(
          event.time * speed +
            (i / pathPoints) * frequency * randomHeights[p] +
            randomOffsets[p]
        );

        // Change the y position of the segment point:
        segment.point.y = halfH + sinus * (h * magnitued);
      }
      path[p].smooth();
    }
  };
};
